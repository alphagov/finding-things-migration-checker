#!/usr/bin/env ruby

require_relative '../lib/data_importer'

class Import

  def initialize
    @importer = DataImporter.new
  end

  def import!
    @importer.import_links_from_publishing_api if import_publishing_api?
    @importer.import_content_from_publishing_api if import_publishing_api?

    @importer.import_data_from_rummager if import_rummager?
  end

  def compare!
    @importer.compare!
  end

private
  def to_import
    ENV.fetch('IMPORT', 'rummager,publishing_api').split(',')
  end

  def import_rummager?
    to_import.include?("rummager")
  end

  def import_publishing_api?
    to_import.include?("publishing_api")
  end
end

importer = Import.new
importer.import!
importer.compare!
