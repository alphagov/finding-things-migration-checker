# Whitelist file to filter out some of the differences detected by the checks.
# Each check has its own section, keyed by the check name.
# Each section can have multiple rules.
# Each rule defines a predicate in disjunctive normal form where the innermost
#   conditions are simple equality checks on particular values for fields in the check output.
# Each rule also provides an expiry date and a reason for the whitelist entry to exist.
#
# An example check section, with a single rule:
#BasePathsMissingFromPublishingApi:
#  rules:
#    - predicate:
#      - index: 'service-manual'
#        format: 'manual_section'
#      - base_path: '/this-page-in-particular-needs-ignoring-as-well'
#      expiry: '2016-05-22'
#      reason: "service-manual (and one extra page) is not fully baked yet, but we'll be ready to handle it soon"


#BasePathsMissingFromRummager:

BasePathsMissingFromPublishingApi:
  rules:
    - predicate:
      - index: 'service-manual'
      expiry: '2016-08-14'
      reason: "We don't think any service manual content has made it into publishing-api yet - it's being rewritten"

LinkedBasePathsMissingFromPublishingApi:
  rules:
    - predicate:
      - link_type: 'people'
      expiry: '2017-06-01'
      reason: "We're not going to look at people links for a long time - let's reassess next year"

LinksMissingFromRummager:
  rules:
    - predicate:
      - link_type: 'people'
      expiry: '2017-06-01'
      reason: "We're not going to look at people links for a long time - let's reassess next year"

RummagerLinksNotIndexedInRummager:
  rules:
    - predicate:
      - link_type: 'people'
      expiry: '2017-06-01'
      reason: "We're not going to look at people links for a long time - let's reassess next year"
    - predicate:
      - link_type: 'organisations'
        link: null
      expiry: '2016-06-14'
      reason: 'https://trello.com/c/pFNSVJqm/648-organisations-hash-in-rummager-missing-the-link-field'
    - predicate:
      - link_type: 'mainstream_browse_pages'
      expiry: '2016-06-14'
      reason: 'https://trello.com/c/KufxB8Sv/650-item-links-not-getting-updated-in-rummager-when-the-link-target-is-redirected-in-publishing-api'

LinksMissingFromPublishingApi:
  rules:
    - predicate:
      - link_type: 'people'
      expiry: '2017-06-01'
      reason: "We're not going to look at people links for a long time - let's reassess next year"
    - predicate:
      - link_type: 'organisations'
        publishing_app: 'specialist-publisher'
      expiry: '2016-06-14'
      reason: 'https://trello.com/c/csue5VYU/646-specialist-publisher-manuals-have-missing-organisations-in-publishing-api'

RummagerRedirectedLinks:
  rules:
    - predicate:
      - link_type: 'mainstream_browse_pages'
        document_publishing_app: 'publisher'
      expiry: '2016-06-14'
      reason: 'https://trello.com/c/CZK3bygv/647-problem-updating-rummager-links-for-publisher-content-when-mainstream-browse-pages-get-redirected'

RummagerRedirects:
  rules:
    - predicate:
      - publishing_app: 'whitehall'
      - publishing_app: 'hmrc-manuals-api'
      expiry: '2016-06-14'
      reason: 'https://trello.com/c/oDkd28x5/649-items-not-getting-updated-in-rummager-when-redirected-in-publishing-api'
    - predicate:
      - publishing_app: 'service-manual-publisher'
      expiry: '2016-08-14'
      reason: "We don't think any service manual content has made it into publishing-api yet - it's being rewritten"

